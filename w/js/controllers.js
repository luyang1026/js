angular.module("starter.controllers",[]).controller("IndexCtrl",["$scope","Index","$state","$ionicLoading","$localstorage",function(t,a,e,o,r){o.show({noBackdrop:!0}),currentPage=1,a.getAllBanner(function(a){200==a.status&&(t.banners=a.data)}),a.getCountry(function(a){200==a.status&&(t.countrys=a.data)}),a.getAllOperate(function(a){200==a.status&&(t.operates=a.data)}),a.getProduceList(currentPage,function(a){200==a.status&&(o.hide(),t.produces=a.data.produce)}),t.search=function(){e.go("app.search")},t.hasMoreData=!0,t.loadMore=function(){currentPage++,a.getProduceList(currentPage,function(a){if(200==a.status)if(a.data.produce)for(var e=0;e<a.data.produce.length;e++)t.produces.push(a.data.produce[e]);else t.hasMoreData=!1}),t.$broadcast("scroll.infiniteScrollComplete")}}]);
angular.module("starter.controllers").controller("ActivityCtrl",["$scope","$state","ProduceDetail",function(t,a,r){var o=a.params.id;r.baseInfo(o,function(a){200==a.status&&(t.produceList=a.data)})}]);
angular.module("starter.controllers").controller("ActivityCouponCtrl",["$scope","Coupon","$stateParams","$ionicLoading","$state","$ionicHistory",function(o,t,i,n,a,e){o.$on("$ionicView.beforeEnter",function(){t.checkHasMobile(function(c){var r=i.activityId;console.log(r),400==c.status?(e.clearHistory(),a.go("app.activityCouponDetail",{activityId:r})):o.submit=function(o){return""==o.mobile?(n.show({template:"请输入手机号",duration:1e3,noBackdrop:!0}),!1):""==o.mobile?(n.show({template:"您输入的手机号格式有误",duration:1e3,noBackdrop:!0}),!1):void t.savePhone(o.mobile,r,function(o){200==o.status&&a.go("app.activityCouponDetail",{activityId:r})})}})})}]);
angular.module("starter.controllers").controller("ActivityCouponDetailCtrl",["$scope","Coupon","$stateParams","$localstorage","ProduceDetail",function(t,o,a,n,s){var i=a.activityId;o.getCoupon(i,function(o){t.coupons=o.data});var r=["1875","1879","1899","1877"].toString(),u=["1470","1858","1854","1352"].toString(),e=["1760","1394","1456","546"].toString(),c=["920","970","972","99"].toString();s.baseInfo(r,function(o){200==o.status&&(t.produceList1=o.data,console.log(JSON.stringify(o,null,4)))}),s.baseInfo(u,function(o){200==o.status&&(t.produceList2=o.data)}),s.baseInfo(e,function(o){200==o.status&&(t.produceList3=o.data)}),s.baseInfo(c,function(o){200==o.status&&(t.produceList4=o.data)})}]);
angular.module("starter.controllers").controller("CartCtrl",["$scope","$state","Cart","$localstorage","Orders","$ionicLoading",function(t,e,c,s,i,r){function o(){var e=s.getObject("checkProduce");return e.length>t.cartLists.length?(s.setObject("checkProduce",[]),t.allCheckType=!1,!1):void(e.length==t.cartLists.length?(t.allCheckType=!0,s.setObject("allCheckType",!0)):(t.allCheckType=!1,s.setObject("allCheckType",!1)))}function a(){var e=s.getObject("checkProduce");0!=e.length?(t.canCast=!0,s.set("canCast",!0)):(t.canCast=!1,s.set("canCast",!1))}r.show({noBackdrop:!0}),t.getLists=function(){r.show({noBackdrop:!0}),c.lists(function(e){if(200==e.status){r.hide(),t.cartLists=e.data,t.sum=e.sum;for(var c=s.getObject("checkProduce"),i=0;i<t.cartLists.length;i++)-1===c.indexOf(t.cartLists[i].produce_id)?t.cartLists[i].isActive=!1:t.cartLists[i].isActive=!0;0!=t.cartLists.length?t.hasCartLists=!0:t.hasCartLists=!1,o(),a()}})},t.$on("$ionicView.beforeEnter",function(){t.getLists()}),t.checkProduce=function(e,c){var i=s.getObject("checkProduce");-1===i.indexOf(e)?(i.unshift(e),s.setObject("checkProduce",i),t.cartLists[c].isActive=!0):(i.splice(i.indexOf(e),1),s.setObject("checkProduce",i),t.cartLists[c].isActive=!1),o(),a(),t.getLists()},t.allCheck=function(){var e=s.getObject("checkProduce"),c=s.getObject("allCheckType");if(1==c)for(var i=0;i<t.cartLists.length;i++)t.cartLists[i].isActive=!1,-1!==e.indexOf(t.cartLists[i].produce_id)&&(e.splice(e.indexOf(t.cartLists[i].produce_id),1),s.setObject("checkProduce",e));else for(var i=0;i<t.cartLists.length;i++)t.cartLists[i].isActive=!0,-1===e.indexOf(t.cartLists[i].produce_id)&&(e.unshift(t.cartLists[i].produce_id),s.setObject("checkProduce",e));o(),a(),t.getLists()},t.delCart=function(e){c.clear(e,function(c){if(200==c.status){var i=s.getObject("checkProduce");i.splice(i.indexOf(e),1),s.setObject("checkProduce",i),t.getLists()}})},t.plus=function(e){r.show({noBackdrop:!0}),c.add(e,function(e){200==e.status?(t.getLists(),r.hide()):r.show({template:e.error,duration:1e3,noBackdrop:!0})})},t.reduce=function(e,s){r.show({noBackdrop:!0}),s>1?c.reduce(e,function(e){200==e.status&&(t.getLists(),r.hide())}):r.show({template:"小主，表再少了，车车要飘起来了~",duration:1e3,noBackdrop:!0})},t.cast=function(){var t=s.getObject("checkProduce"),c=t.toString();c&&e.go("app.orderInfoCart",{produce_ids:c,from:1})}}]);
angular.module("starter.controllers").controller("CenterCtrl",["$scope","Center",function(e,t){e.$on("$ionicView.beforeEnter",function(){t.getUserBaseInfo(function(t){200==t.status?e.baseInfo=t.data:400==t.status&&alert(t.error)})})}]);
angular.module("starter.controllers").controller("ClearanceGo",["$scope","Clearance","$localstorage","$location","Pay","$timeout","$rootScope",function(a,e,t,o,r,n,l){var c=t.get("order_parentoid");a.moneypaid=t.get("moneypaid"),a.clearanceFlag=!1,a.navHide=!0,e.verify(c,function(e){200==e.status&&e.data.status?(console.log(e.data.status),r.orderSplitable(c,function(e){200==e.status&&0==e.data.sub_orders.length?a.clearanceFlag=!0:n(function(){o.path("/app/order/pay")},2e3)})):a.navHide=!1})}]);
angular.module("starter.controllers").controller("clearanceVerify",["$scope","$location","Clearance","$localstorage","$ionicLoading",function(o,e,a,n,r){o.validate=function(o){if(console.log(o.name),""==o.name)return r.show({template:"姓名不能为空",duration:1e3,noBackdrop:!0}),!1;if(""==o.phone)return r.show({template:"电话不能为空",duration:1e3,noBackdrop:!0}),!1;var t,c,l=n.get("clearanceFrom");1==l&&(t=n.get("parentoid"),c=""),2==l&&(c=n.get("oid"),t=""),a.submit(t,c,l,function(o){console.log(o),200==o.status?e.path("app/clearance/success"):r.show({template:o.error,duration:1500,noBackdrop:!0})})}}]);
angular.module("starter.controllers").controller("CouponCtrl",["$scope","Coupon","$ionicLoading",function(o,a,t){o.tab=1,o.page=1,o.hasMoreData=!0,o.$watch("tab",function(){t.show({noBackdrop:!0}),a.getList(o.tab,o.page,function(a){200==a.status&&(t.hide(),o.coupons=a.data,console.log(JSON.stringify(a,null,4)))})}),o.loadMore=function(){o.page++,a.getList(o.tab,o.page,function(a){if(200==a.status)if(0!=a.data.length){for(var t=0;t<a.data.length;t++)o.coupons.push(a.data[t]);o.$broadcast("scroll.infiniteScrollComplete")}else o.hasMoreData=!1,o.page=1})}}]);
angular.module("starter.controllers").controller("CouponSelctCtrl",["$scope","$localstorage","Coupon","$ionicHistory","$ionicLoading","$location",function(o,e,t,n,a,c){o.page=1,o.couponSelectedId=e.getObject("couponSelected").id,t.getList(1,o.page,function(e){console.log(JSON.stringify(e,null,4)),200==e.status&&(o.coupons=e.data)}),o.loadMore=function(){o.page++,t.getList(1,o.page,function(e){if(200==e.status)if(0!=e.data.length){for(var t=0;t<e.data.length;t++)o.coupons.push(e.data[t]);o.$broadcast("scroll.infiniteScrollComplete")}else o.hasMoreData=!1})};var l=e.get("couponUrl");e.del("couponUrl"),o.selectCoupon=function(o,t,n){var r=e.get("pay_money"),i={};Number(r)>Number(n)?(i.price=o,i.id=t,e.setObject("couponSelected",i),c.path("/app/order/info/cart/"+l)):(i.price=0,i.id=null,a.show({template:"优惠券不可选",duration:1e3,noBackdrop:!0}))},o.delCoupon=function(){e.del("couponSelected"),c.path("/app/order/info/cart/"+l)}}]);
angular.module("starter.controllers").controller("LoginCtrl",["$scope","$state","Login",function(o,t,a){o.formData={mobile:"",password:""},o.login=function(){a.setLogin(o.formData.mobile,o.formData.password,function(t){200==t.status?o.logindata=t.data:400==t.status&&alert(t.error)})}}]);
angular.module("starter.controllers").controller("OrderAddressSelectCtrl",["$scope","$state","Address","$localstorage","$ionicHistory","$stateParams","$location",function(r,e,s,d,t,o,a){var n=o.from;r.$on("$ionicView.beforeEnter",function(){s.lists(function(e){200==e.status?r.addressList=e.data:400==e.status&&alert(e.error)})});var i=d.get("couponUrl");r.selectAddress=function(r){d.set("current_user_addrid",r),a.path("/app/order/info/cart/"+i)},r.addAddress=function(){1==n?e.go("app.userAddressAddCart",{from:n}):e.go("app.userAddressAddIndex",{from:n})},r.editAddress=function(r){e.go("app.userAddressEditIndex",{user_addrid:r,from:n})}}]);
angular.module("starter.controllers").controller("OrderDetailCtrl",["$scope","$state","$stateParams","UserOrder","$localstorage","$location",function(e,r,t,o,a,i){e.oid=t.oid,a.set("refundOid",t.oid),e.$on("$ionicView.beforeEnter",function(){o.getOrderDetail(e.oid,function(r){if(200==r.status){console.log(JSON.stringify(r,null,4)),e.details=r.data;var t=e.details.order_address.split("|");e.details.name=t[0],e.details.mobile=t[1],e.details.address=t[2]}})}),e.pay=function(){a.set("parentoid",e.order_number),window.location.href="/app/order/pay"},e.clearanceVerify=function(){a.set("oids",e.oids),a.set("clearanceFrom",2),i.path("/app/clearance")},e.receive=function(){confirm("确认收货")&&o.Receive(e.oids,function(e){200==e.status&&r.go("app.userOrderList",{tab:3})})}}]);
angular.module("starter.controllers").controller("OrderInfoCtrl",["$location","$scope","$state","$stateParams","Orders","Address","Cart","$localstorage","$ionicLoading","$timeout","$ionicHistory",function(e,o,r,n,d,s,t,a,c,u,p){var i=n.produce_ids,l=n.from,f=n.produce_ids+"/"+n.from;a.set("couponUrl",f),o.from=l,o.num=1,o.couponPrice=a.getObject("couponSelected").price||"0",a.del("couponSelected"),d.getInfo(i,l,function(e){if(200==e.status){console.log(JSON.stringify(e,null,4)),o.couponAvailable="1"==e.data.isCoupon?!0:!1;var n=e.data,d=n.produces,s=0,t=0;for(key in d)s+=d[key].sell_price*d[key].num;a.set("pay_money",s),t=s+n.express_fee,n.pay_money=s,n.total_money=t,o.orderInfo=n}else 400==e.status&&(c.show({template:e.error,noBackdrop:!0,duration:1e3}),u(function(){p.clearHistory(),r.go("app.center")},1e3))}),o.$on("$ionicView.beforeEnter",function(){var e=a.get("current_user_addrid");e?s.GetAddressById(e,function(e){200==e.status&&(o.address=e.data)}):s.getDefaultAddress(function(e){200==e.status&&(o.address=e.data)})}),o.getCoupon=function(){if(o.couponAvailable){var r="/app/cart/couponSelect";e.path(r)}},o.plus=function(){o.orderInfo.produces[0].num++,o.num=o.orderInfo.produces[0].num,o.orderInfo.pay_money=o.orderInfo.produces[0].num*o.orderInfo.produces[0].sell_price,o.orderInfo.total_money=o.orderInfo.pay_money+o.orderInfo.express_fee},o.reduce=function(){o.orderInfo.produces[0].num>1&&(o.orderInfo.produces[0].num--,o.num=o.orderInfo.produces[0].num,o.orderInfo.pay_money=o.orderInfo.produces[0].num*o.orderInfo.produces[0].sell_price,o.orderInfo.total_money=o.orderInfo.pay_money+o.orderInfo.express_fee)},o.createOrder=function(){var e={};return e.produce_ids=i,e.num=o.num,e.from=l,e.user_coupon_id=a.getObject("couponSelected").id||null,o.address?(e.order_address=o.address.name+"|"+o.address.mobile+"|"+o.address.province+o.address.city+o.address.district+o.address.address,void d.create(e,function(o){if(200==o.status){a.del("couponSelected");var r=o.data.parentoid;a.set("parentoid",r),1==e.from?t.clear(e.produce_ids,function(e){console.log(e),a.del("checkProduce"),window.location.href="/app/order/pay"}):window.location.href="/app/order/pay"}else alert(o.error)})):(c.show({template:"请填写收货人地址",duration:1e3,noBackdrop:!0}),!1)},o.chooseAddress=function(){var e=n.from;1==e?r.go("app.userAddressSelectCart",{from:e}):r.go("app.userAddressSelect",{from:e})}}]);
angular.module("starter.controllers").controller("OrderListCtrl",["$scope","$state","$stateParams","UserOrder","$localstorage","$ionicLoading",function(t,r,a,e,o,s){var n=1;t.tab=a.tab,t.$watch("tab",function(){s.show({noBackdrop:!0}),e.getOrdersList(t.tab,1,function(r){console.log(JSON.stringify(r,null,4)),200==r.status?(s.hide({}),t.orders=r.data):400==r.status&&(s.hide({}),alert(r.error))})}),t.$on("$ionicView.beforeEnter",function(){e.getOrdersList(t.tab,1,function(r){200==r.status?(s.hide({}),t.orders=r.data):400==r.status&&(s.hide({}),alert(r.error))})}),t.hasMoreData=!0,n++,t.loadMore=function(){e.getOrdersList(t.tab,n,function(r){if(200==r.status)if(0!=r.data.length){for(var a=0;a<r.data.length;a++)t.orders.push(r.data[a]);t.$broadcast("scroll.infiniteScrollComplete"),n++}else t.hasMoreData=!1})},t.pay=function(t){o.set("parentoid",t),window.location.href="/app/order/pay"},t.receive=function(r){confirm("确认收货")&&e.Receive(r,function(r){200==r.status&&e.getOrdersList(tab,1,function(r){200==r.status&&(t.orders=r.data)})})}}]);
angular.module("starter.controllers").controller("OrderPayCtrl",["$scope","$state","Pay","$localstorage","$ionicLoading","$rootScope","$ionicHistory",function(e,r,t,a,n,o,s){function i(e){n.hide({}),WeixinJSBridge.invoke("getBrandWCPayRequest",e,function(e){switch(e.err_msg){case"get_brand_wcpay_request:cancel":location.href="/";break;case"get_brand_wcpay_request:fail":location.href="/";break;case"get_brand_wcpay_request:ok":location.href="/app/paytest/WxpaySuccess"}})}e.openid="";var d=a.get("parentoid"),c=null,p=!1,u=null;t.orderSplitable(d,function(t){200==t.status?(e.orders=t.data,t.data.is_split?(e.pick(e.orders.sub_orders[0]),p=!0):(c=e.orders.sub_orders[0].order_sn,u=(e.orders.sub_orders[0].pay_money-e.orders.sub_orders[0].reduce)/100,a.set("moneypaid",u))):(r.go("app.center"),s.clearHistory())}),e.pick=function(r){for(var t=e.orders.sub_orders,n=0;n<t.length;n++)t[n].selected=!1;r.selected=!0,c=r.order_sn,u=(r.pay_money-r.reduce)/100,a.set("moneypaid",u)},e.pay=function(){a.set("clearanceFrom",1),n.show({}),t.getOpenidByUid(function(r){200==r.status&&(e.openid=r.data.openid,a.set("order_parentoid",d),t.payment(e.openid,c,function(e){e?(jsApiParameters=e,"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",i(jsApiParameters),!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",i(jsApiParameters)),document.attachEvent("onWeixinJSBridgeReady",i(jsApiParameters))):i(jsApiParameters)):alert("调起微信支付失败")}))})}}]);
angular.module("starter.controllers").controller("OrderServiceCtrl",["$scope","$state","$stateParams","OrderService",function(e,r,a,t){var s=1;t.getUserOrderService(s,function(r){200==r.status?(e.services=r.data,console.log(e.services)):400==r.status&&alert(r.error)}),e.hasMoreData=!0,s++,e.loadMore=function(){t.getUserOrderService(s,function(r){if(200==r.status)if(0!=r.data.length){for(var a=0;a<r.data.length;a++)e.orderService.push(r.data[a]);e.$broadcast("scroll.infiniteScrollComplete"),s++}else e.hasMoreData=!1})},e.detail=function(e,a,t){switch(e){case"600":r.go("app.userOrderServiceReturnCheck");break;case"601":0==t?r.go("app.userOrderServiceReturn",{orders_detail_id:a}):r.go("app.userOrderServiceReturnCheck");break;case"701":r.go("app.userOrderServiceReturnCheck");break;case"702":r.go("app.userOrderServiceRefund",{orders_detail_id:a,status:e});break;case"603":r.go("app.userOrderServiceRefund",{orders_detail_id:a,status:e})}}}]);
angular.module("starter.controllers").controller("UserOrderServiceApply",["$scope","$state","$stateParams","UserOrder","$ionicHistory","$ionicLoading","$localstorage","$location",function(e,r,a,t,o,s,i,n){e.status=a.status,e.orders_detail_id=a.orders_detail_id,e.refund_money=a.refund_money,e.serviceData={service:"",reason:"",remark:"",upload_json:""};var d=i.get("refundOid");e.apply=function(){if(console.log($("#upload_json").val()),e.serviceData.picture=$("#upload_json").val(),e.serviceData.orders_detail_id=e.orders_detail_id,""==e.serviceData.reason)return s.show({template:"请选择退款原因",duration:1e3,noBackdrop:!0}),!1;if("退货"==e.serviceData.service)t.Return(e.serviceData,function(e){return console.log(e),!1});else{if("退款"!=e.serviceData.service)return s.show({template:"请选择售后类型",duration:1e3,noBackdrop:!0}),!1;t.Refund(e.serviceData,function(e){200==e.status?(alert("申请成功,请耐心等待"),n.path("/app/user/order/detail/"+d)):alert(e.error)})}}}]);
angular.module("starter.controllers").controller("UserOrderServiceRefund",["$scope","$state","$stateParams","UserOrder",function(e,r,t,a){var s=t.status,n=t.orders_detail_id;702==s?a.getRefundDetail(n,function(r){200==r.status?e.refundDetail=r.data:alert(r.error)}):603==s&&a.getReturnDetail(n,function(r){200==r.status?e.refundDetail=r.data:alert(r.error)})}]);
angular.module("starter.controllers").controller("UserOrderServiceReturn",["$scope","$state","$stateParams","UserOrder","$ionicHistory",function(e,s,r,t,a){t.getExpress(function(s){200==s.status&&(e.express=s.data)}),e.expressData={experss_com:0,express_sn:""},console.log(e.expressData),e.submit=function(){e.expressData.orders_detail_id=r.orders_detail_id,t.SubmitExpress(e.expressData,function(e){200==e.status?(alert("上传快递单成功"),a.goBack()):alert(e.error)})}}]);
angular.module("starter.controllers").controller("UserOrderServiceReturnCheck",["$scope","$state","$stateParams",function(e,r,t){}]);
angular.module("starter.controllers").controller("ProduceDetailCtrl",["$scope","$state","$stateParams","ProduceDetail","Cart","$ionicLoading",function(t,o,a,n,e,r){t.$on("$ionicView.beforeEnter",function(){r.show({noBackdrop:!0}),t.produce_id=a.produce_id,n.getProduceDetail(t.produce_id,function(o){200==o.status?t.details=o.data:400==o.status&&alert(o.error)}),n.base(t.produce_id,function(o){200==o.status&&(t.base=o.data)}),e.getCartCount(function(o){200==o.status&&(console.log(JSON.stringify(o,null,4)),t.num=o.data.count)}),t.addToCart=function(){r.show({noBackdrop:!0}),e.add(t.produce_id,function(o){200==o.status?e.getCartCount(function(o){200==o.status&&(r.show({template:"已加入购物车",duration:1e3,noBackdrop:!0}),t.num=o.data.count)}):r.show({template:o.error,duration:1e3,noBackdrop:!0})})}}),t.$on("$ionicView.afterEnter",function(){r.hide()})}]);
angular.module("starter.controllers").controller("SearchCtrl",["$scope","Search","$localstorage","$state",function(e,r,o,c){function t(){var r=o.getObject("records");0!==r.length?e.hasRecords=!0:e.hasRecords=!1}e.$on("$ionicView.beforeEnter",function(){t()}),e.keyword="",e.records=o.getObject("records"),e.search=function(){var r=e.records;-1===r.indexOf(e.keyword)&&""!==e.keyword&&(r.length<10?r.unshift(e.keyword):(r.unshift(e.keyword),r.pop())),o.setObject("records",r),e.records=o.getObject("records"),c.go("app.searchList",{keyword:e.keyword})},e.clearRecords=function(){o.del("records"),e.records=o.getObject("records"),t()}}]);
angular.module("starter.controllers").controller("SearchListCtrl",["$scope","$state","$stateParams","Search","$localstorage",function(e,r,t,s,o){e.keyword=t.keyword,e.records=o.getObject("records"),currentPage=1,s.lists(e.keyword,e.page,function(r){200==r.status&&(e.produces=r.data,0!=e.produces.length?e.hasProduces=!0:e.hasProduces=!1)}),e.search=function(){s.lists(e.keyword,1,function(r){200==r.status&&(e.produces=r.data,0!=e.produces.length?e.hasProduces=!0:e.hasProduces=!1);var t=e.records;-1===t.indexOf(e.keyword)&&""!==e.keyword&&(t.length<10?t.unshift(e.keyword):(t.unshift(e.keyword),t.pop())),o.setObject("records",t)})},e.hasMoreData=!0,currentPage++,e.loadMore=function(){s.lists(e.keyword,currentPage,function(r){if(200==r.status)if(0!=r.data.length){for(var t=0;t<r.data.length;t++)e.produces.push(r.data[t]);e.$broadcast("scroll.infiniteScrollComplete"),currentPage++}else e.hasMoreData=!1})}}]);
angular.module("starter.controllers").controller("UserAddressAddCtrl",["$scope","$state","$stateParams","Address","$ionicLoading",function(e,o,r,t,n){function a(e){return/^1[3|4|5|7|8]\d{9}$/.test(e)?void 0:(n.show({template:"手机号格式错误",duration:1e3,noBackdrop:!0}),!1)}e.$on("$ionicView.beforeEnter",function(){n.show({noBackdrop:!0})}),e.$on("$ionicView.afterEnter",function(){n.hide()}),e.submit=function(e){if(""==e.name)return n.show({template:"收货人不能为空",duration:1e3,noBackdrop:!0}),!1;if(""==e.mobile)return n.show({template:"手机号不能为空",duration:1e3,noBackdrop:!0}),!1;if(0==a(e.mobile))return!1;var d=$("#demo_dummy").val();return d?""==e.address?(n.show({template:"详细地址不能为空",duration:1e3,noBackdrop:!0}),!1):(n.show({noBackdrop:!0}),void t.add(e.name,e.mobile,d,e.address,function(e){if(200==e.status){var t=r.from;n.hide(),2==t?o.go("app.userAddressSelect",{from:t}):1==t?o.go("app.userAddressSelectCart",{from:t}):o.go("app.useraddresslist")}})):(n.show({template:"所在区域不能为空",duration:1e3,noBackdrop:!0}),!1)}}]);
angular.module("starter.controllers").controller("UserAddressEditCtrl",["$scope","$state","$stateParams","Address","$ionicLoading",function(e,o,t,r,a){e.$on("$ionicView.beforeEnter",function(){a.show({noBackdrop:!0})});var d=t.user_addrid;e.init=function(){r.GetAddressById(d,function(o){if(200==o.status){a.hide();var t=o.data.province+" "+o.data.city+" "+o.data.district;$("#demo_dummy").val(t),e.address=o.data}})},e.submit=function(e){if(""==e.name)return a.show({template:"收货人不能为空",duration:1e3,noBackdrop:!0}),!1;if(""==e.mobile)return a.show({template:"手机号不能为空",duration:1e3,noBackdrop:!0}),!1;var s=$("#demo_dummy").val();return s?""==e.address?(a.show({template:"详细地址不能为空",duration:1e3,noBackdrop:!0}),!1):(a.show({noBackdrop:!0}),void r.edit(d,e.name,e.mobile,s,e.address,function(e){if(200==e.status){a.hide();var r=t.from;2==r?o.go("app.userAddressSelect",{from:r}):o.go("app.useraddresslist")}})):(a.show({template:"所在区域不能为空",duration:1e3,noBackdrop:!0}),!1)}}]);
angular.module("starter.controllers").controller("UserAddressListCtrl",["$scope","$state","Address","$ionicLoading",function(s,t,e,d){function n(){e.lists(function(t){d.hide(),200==t.status?s.addressList=t.data:400==t.status&&alert(t.error)})}d.show({noBackdrop:!0}),s.deleteaddress=function(s){e.DeleteAddressById(s,function(s){n()})},s.$on("$ionicView.beforeEnter",function(){n()}),s.edit=function(s){t.go("app.userAddressEdit",{user_addrid:s})},s.updateAddress=function(s,t){d.show({noBackdrop:!0}),e.setDefaultAddress(s,t,function(s){200==s.status&&n()})}}]);