angular.module("starter.services",[]).factory("Index",["$http","apiUrl",function(t,e){return{getAllBanner:function(n){t.post(e+"/index/getAllBanner",{version:"wx"}).success(function(t){n(t)})},getCountry:function(n){t.post(e+"/index/getCountry",{version:"wx"}).success(function(t){n(t)})},getAllOperate:function(n){t.post(e+"/index/getAllOperate",{version:"wx"}).success(function(t){if(200==t.status)for(var e=0;e<t.data.length;e++){var r=new Array;r=t.data[e].picture.split(","),t.data[e].picture=r;var a=new Array;a=t.data[e].url.split(","),t.data[e].url=a;var s=new Array;s=t.data[e].pids.split("|"),t.data[e].pids=s}n(t)})},getProduceList:function(n,r){t.post(e+"/index/getProduceList",{version:"wx",page:n}).success(function(t){r(t)})}}}]);
angular.module("starter.services").factory("Address",["$http","apiUrl","$rootScope",function(s,d,e){return{lists:function(u){s.post(d+"/user/address/lists",{version:"wx",uid:e.uid}).success(function(s){u(s)})},GetAddressById:function(u,i){s.post(d+"/user/address/getaddressbyid",{version:"wx",uid:e.uid,user_addrid:u}).success(function(s){i(s)})},getDefaultAddress:function(u){s.post(d+"/user/address/getdefault",{version:"wx",uid:e.uid}).success(function(s){u(s)})},setDefaultAddress:function(u,i,r){s.post(d+"/user/address/updatedefault",{version:"wx",user_addrid:u,is_default:i,uid:e.uid}).success(function(s){console.log(s),r(s)})},add:function(u,i,r,t,n){s.post(d+"/user/address/add",{version:"wx",uid:e.uid,name:u,mobile:i,address:t,area:r}).success(function(s){n(s)})},edit:function(u,i,r,t,n,o){s.post(d+"/user/address/edit",{version:"wx",uid:e.uid,user_addrid:u,name:i,mobile:r,address:n,area:t}).success(function(s){o(s)})},DeleteAddressById:function(u,i){s.post(d+"/user/address/deleteaddress",{version:"wx",uid:e.uid,user_addrid:u}).success(function(s){i(s)})}}}]);
angular.module("starter.services").factory("Cart",["$http","apiUrl","$rootScope","$localstorage",function(t,c,u,e){return{add:function(e,i){t.post(c+"/cart/add",{version:"wx",uid:u.uid,produce_id:e,num:1}).success(function(t){i(t)})},getCartCount:function(e){t.post(c+"/cart/getCartCount",{version:"wx",uid:u.uid}).success(function(t){e(t)})},clear:function(e,i){t.post(c+"/cart/clear",{version:"wx",uid:u.uid,produce_id:e}).success(function(t){i(t)})},reduce:function(e,i){t.post(c+"/cart/reduce",{version:"wx",uid:u.uid,produce_id:e,num:1}).success(function(t){i(t)})},lists:function(i){t.post(c+"/cart/lists",{version:"wx",uid:u.uid}).success(function(t){if(200==t.status){var c=e.getObject("checkProduce");console.log(c);for(var u=0,o=0;o<t.data.length;o++)-1!==c.indexOf(t.data[o].produce_id)&&(u+=t.data[o].price*t.data[o].num),t.data[o].price=t.data[o].price/100;t.sum=u/100}i(t)})}}}]);
angular.module("starter.services").factory("Center",["$http","apiUrl","$rootScope",function(e,r,t){return{getUserBaseInfo:function(n){e.post(r+"/user/center/info",{version:"wx",uid:t.uid}).success(function(e){n(e)})}}}]);
angular.module("starter.services").factory("Clearance",["$http","apiUrl","$rootScope",function(r,i,e){return{verify:function(o,t){r.post(i+"/user/card/verify",{version:"wx",uid:e.uid,parentoid:o}).success(function(r){t(r)})},submit:function(o,t,u,n){r.post(i+"/user/card/submit",{version:"wx",uid:e.uid,parentoid:o,oid:t,from:u}).success(function(r){n(r)})}}}]);
angular.module("starter.services").factory("Coupon",["$http","apiUrl","$rootScope",function(o,i,u){return{getList:function(n,s,t){o.post(i+"/user/coupon/lists",{version:"wx",uid:u.uid,tab:n,page:s}).success(function(o){t(o)})},savePhone:function(n,s,t){o.post(i+"/user/coupon/getcoupon",{version:"wx",uid:u.uid,mobile:n,activity_id:s}).success(function(o){t(o)})},getCoupon:function(n,s){o.post(i+"/user/coupon/GetCouponByActivityId",{version:"wx",uid:u.uid,activity_id:n}).success(function(o){s(o)})},checkHasMobile:function(n){o.post(i+"/user/coupon/hasMobile",{version:"wx",uid:u.uid}).success(function(o){n(o)})}}}]);
angular.module("starter.services").factory("$localstorage",["$window","$rootScope",function(t,e){return{set:function(r,o){t.localStorage[r+"_"+e.uid]=o},get:function(r,o){return t.localStorage[r+"_"+e.uid]||o},setObject:function(r,o){t.localStorage[r+"_"+e.uid]=JSON.stringify(o)},getObject:function(r){if(void 0===t.localStorage[r+"_"+e.uid]){var o=new Array;return o}return JSON.parse(t.localStorage[r+"_"+e.uid])},del:function(r){return t.localStorage.removeItem(r+"_"+e.uid)}}}]);
angular.module("starter.services").factory("Login",["$http","apiUrl",function(n,o){return{setLogin:function(s,r,t){n.post(o+"/user/login",{version:"wx",mobile:s,password:r}).success(function(n){t(n)})}}}]);
angular.module("starter.services").factory("Orders",["$http","apiUrl","$rootScope",function(r,o,e){return{getInfo:function(s,u,d){r.post(o+"/orders/info",{version:"wx",uid:e.uid,produce_ids:s,from:u}).success(function(r){d(r)})},create:function(s,u){r.post(o+"/orders/create",{version:"wx",uid:e.uid,produce_ids:s.produce_ids,num:s.num,from:s.from,order_address:s.order_address,user_coupon_id:s.user_coupon_id}).success(function(r){u(r)})}}}]);
angular.module("starter.services").factory("OrderService",["$http","apiUrl","$rootScope",function(e,r,s){return{getUserOrderService:function(t,c){e.post(r+"/user/orders/service",{version:"wx",uid:s.uid,page:t}).success(function(e){c(e)})}}}]);
angular.module("starter.services").factory("Pay",["$http","apiUrl","$rootScope",function(e,n,t){return{getOpenidByUid:function(i){e.post(n+"/user/center/getopenidbyuid",{version:"wx",uid:t.uid}).success(function(e){i(e)})},payment:function(i,o,s){e.post(n+"/pay/payment",{version:"wx",uid:t.uid,openid:i,order_sn:o,pay_type:2}).success(function(e){s(e)})},orderSplitable:function(i,o){e.post(n+"/pay/getsuborders",{version:"wx",uid:t.uid,parentoid:i}).success(function(e){o(e)})}}}]);
angular.module("starter.services").factory("ProduceDetail",["$http","apiUrl","$rootScope",function(e,t,c){return{getProduceDetail:function(c,a){e.post(t+"/produce/detail",{version:"wx",produce_id:c}).success(function(e){a(e)})},base:function(c,a){e.post(t+"/produce/base",{version:"wx",produce_id:c}).success(function(e){e.data.market_price=e.data.market_price/100,e.data.sell_price=e.data.sell_price/100,e.data.pledge=e.data.pledge.split(","),a(e)})},baseInfo:function(c,a){e.post(t+"/activity/getProduceBaseInfo",{produce_ids:c}).success(function(e){a(e)})}}}]);
angular.module("starter.services").factory("Search",["$http","apiUrl",function(s,r){return{lists:function(t,e,c){s.post(r+"/search/lists",{version:"wx",keyword:t,page:e}).success(function(s){c(s)})}}}]);
angular.module("starter.services").factory("UserOrder",["$http","apiUrl","$rootScope",function(e,r,s){return{getOrdersList:function(i,u,o){e.post(r+"/user/orders/lists",{version:"wx",uid:s.uid,tab:i,page:u}).success(function(e){o(e)})},getOrderDetail:function(i,u){e.post(r+"/user/orders/detail",{version:"wx",uid:s.uid,oid:i}).success(function(e){u(e)})},Receive:function(i,u){e.post(r+"/user/orders/receive",{version:"wx",uid:s.uid,oid:i}).success(function(e){u(e)})},Return:function(i,u){console.log(i),e.post(r+"/user/orders/return/apply",{version:"wx",uid:s.uid,picture:i.picture,reason:i.reason,remark:i.remark,orders_detail_id:i.orders_detail_id}).success(function(e){u(e)})},Refund:function(i,u){e.post(r+"/user/orders/refund/apply",{version:"wx",uid:s.uid,reason:i.reason,remark:i.remark,orders_detail_id:i.orders_detail_id}).success(function(e){u(e)})},getExpress:function(i){e.post(r+"/user/orders/return/express",{version:"wx",uid:s.uid}).success(function(e){i(e)})},SubmitExpress:function(i,u){e.post(r+"/user/orders/return/submit",{version:"wx",uid:s.uid,orders_detail_id:i.orders_detail_id,express_com:i.express_com,express_sn:i.express_sn}).success(function(e){u(e)})},getRefundDetail:function(i,u){e.post(r+"/user/orders/refund/detail",{version:"wx",uid:s.uid,orders_detail_id:i}).success(function(e){u(e)})},getReturnDetail:function(i,u){e.post(r+"/user/orders/return/detail",{version:"wx",uid:s.uid,orders_detail_id:i}).success(function(e){u(e)})}}}]);